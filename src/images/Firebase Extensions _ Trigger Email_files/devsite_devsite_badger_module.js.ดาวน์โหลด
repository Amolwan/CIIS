(function(_ds){var window=this;'use strict';var bI=function(a){var b=a.pb;a=_ds.X;var c=b[0].imageUrl,d=b[0].servePath,e=b[0].le,g=b[0].cg,k=b[0].Gf,m=b[0].shareTitle,n=b[0].shareDescription;b=(0,_ds.X)('<div class="devsite-badger-award"><div class="devsite-badger-award-inner"><devsite-badge-awarded badge-name="'+_ds.Z(b[0].title)+'" badge-icon-url="'+_ds.Z(_ds.Dp(c))+'"'+(d?' badge-path="'+_ds.Z(d)+'"':"")+(m?' badge-share-title="'+_ds.Z(m)+'"':"")+(n?' badge-share-description="'+_ds.Z(n)+'"':"")+(e?' next-playlist-url="'+_ds.Z(_ds.Dp(e))+
'"':"")+(g?" redeem-another":"")+(k?" hide-buttons":"")+" dismiss></devsite-badge-awarded></div></div>");return a(b)},dI=function(){var a=_ds.Bs.call(this,["devsite-badge-awarded"])||this;a.o=new _ds.Bj;a.m=new _ds.$q;a.j=null;a.C=[];a.F=new _ds.tq;a.G=-1;a.D=new _ds.yj(function(){return void cI(a)},250);a.h=null;return a},eI=function(){return"devsite-badger"},fI=function(a){return _ds.E(function(b){if(1==b.h){if(!_ds.ul(a.m))return b.return(!1);_ds.xl(["devsite-badge-awarded"]);return _ds.w(b,window.customElements.whenDefined("devsite-badge-awarded"),
2)}return b.return(!0)})},iI=function(a){a.o.listen(document.body,"devsite-before-page-change",function(){return void gI(a)});a.o.listen(document.body,"devsite-award-granted",function(b){(b=b.Z)&&b.detail&&(a.C.push(b.detail.award),a.D.qa())});a.o.listen(document.body,["devsite-page-loaded","devsite-page-changed"],function(){hI(a);a:if(_ds.ul(a.m)){var b=a.m.get("temp_badge");if(b){try{var c=JSON.parse(b)}catch(e){a.m.remove("temp_badge");break a}if(3>c.displayCount){a.m.set("temp_badge",JSON.stringify(c));
b=new URL(c.awardUrl,document.location.origin);var d=_ds.li();b.origin===d.origin&&b.pathname===d.pathname&&(a.C.push(c),a.D.qa())}else a.m.remove("temp_badge")}}})},hI=function(a){var b,c,d,e;_ds.E(function(g){switch(g.h){case 1:if(a.h)return g.return(a.h.promise);a.h=new _ds.zl;_ds.z(g,2);return _ds.w(g,fI(a),4);case 4:b=g.j;if(!b)return a.h.resolve(),g.return(a.h.promise);_ds.B(g,3);break;case 2:return _ds.C(g),a.h.resolve(),g.return(a.h.promise);case 3:return c=!1,_ds.z(g,5),_ds.w(g,a.F.hasWallet(),
7);case 7:c=g.j;_ds.B(g,6);break;case 5:_ds.C(g);case 6:return c?_ds.w(g,window.customElements.whenDefined("devsite-user"),8):(a.h.resolve(),g.return(a.h.promise));case 8:d=document.querySelector("devsite-user#devsite-user");if(!d){g.J(9);break}e=!1;_ds.z(g,10);return _ds.w(g,d.isSignedIn(),12);case 12:e=g.j;_ds.B(g,11);break;case 10:_ds.C(g);case 11:if(!e){g.J(13);break}return _ds.w(g,a.F.getProfile(),13);case 13:a.h.resolve();case 9:return g.return(a.h.promise)}})},cI=function(a){var b,c,d;return _ds.E(function(e){switch(e.h){case 1:if(a.j||
0===a.C.length||"error"===document.body.getAttribute("type")||jI.exec(document.location.pathname))return e.return();_ds.z(e,2);return _ds.w(e,window.customElements.whenDefined("devsite-badge-awarded"),4);case 4:_ds.B(e,3);break;case 2:_ds.C(e);case 3:b=a.C.splice(0,1);c=_ds.Op(bI,{pb:b});if(!c)return e.return();a.o.listen(c,"click",function(g){(g=g.target)&&g.matches("button.dismiss")&&gI(a)});a.j=c;(d=c.querySelector("devsite-badge-awarded"))?(_ds.Fj(a.o,d,"running",function(){kI(a.j)}),document.body.appendChild(a.j)):
(document.body.appendChild(a.j),kI(a.j));_ds.x(e)}})},kI=function(a){_ds.E(function(b){a&&a.setAttribute("show","");_ds.x(b)})},gI=function(a){return _ds.E(function(b){if(1==b.h){if(!a.j)return b.return();a.m.remove("temp_badge");a.j.removeAttribute("show");return _ds.w(b,_ds.Ci(200),2)}if(3!=b.h)return _ds.Qg(a.j),a.j=null,_ds.w(b,_ds.Ci(250),3);a.D.qa();_ds.x(b)})};var jI=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/;_ds.u(dI,_ds.Bs);dI.prototype.disconnectedCallback=function(){_ds.Hj(this.o);gI(this)};dI.prototype.connectedCallback=function(){var a=this;iI(this);fI(this).then(function(b){b||_ds.Qg(a)}).catch(function(){_ds.Qg(a)})};dI.prototype.connectedCallback=dI.prototype.connectedCallback;dI.getTagName=eI;dI.prototype.disconnectedCallback=dI.prototype.disconnectedCallback;try{window.customElements.define(eI(),dI)}catch(a){console.warn("devsite.app.customElement.DevsiteBadger",a)};})(_ds_www);
